name: Test

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  test:
    strategy:
      fail-fast: false
      # Remove to cancel all jobs upon the first failure

      matrix:
        runner:
          # Remove or add runners as needed, see available runners at
          # https://docs.github.com/en/actions/how-tos/using-github-hosted-runners/using-github-hosted-runners/about-github-hosted-runners#standard-github-hosted-runners-for-public-repositories
          - ubuntu-22
          - ubuntu-latest     # x86_64 Linux
          - ubuntu-24.04-arm  # ARM64 Linux
          - macos-13          # Intel macOS
          - macos-latest      # ARM64 macOS
          - windows-latest    # x86_64 Windows

    runs-on: ${{ matrix.runner }}
    steps:
      - uses: actions/checkout@v4

      - name: Set up Alire
        uses: alire-project/setup-alire@v5

      - name: Build tests
        run: alr test
